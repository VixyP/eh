# 1. Even lines

import re

output = open(".\\output.txt", "w")
with open(".\\text.txt") as file:
    lines = [l.rstrip("\n") for l in file]

for i in range(len(lines)):
    if i % 2 == 0:
        line = re.sub(r"[-,.!?]", "@", lines[i]).split(" ")[::-1]
        output.write(" ".join(line) + "\n")

output.close()

# 2. Line numbers

import re

output = open(".\\output.txt", "w")
with open(".\\text.txt") as file:
    lines = [l.rstrip("\n") for l in file]

for i in range(len(lines)):
    letters_and_pm = len(re.sub(r'[^A-Za-z]', "", lines[i]))
    punctuation_marks = len(re.sub(r"[^-.,:;!?'\"]", "", lines[i]))
    output.write(f"Line {i + 1}: {lines[i]} ({letters_and_pm})({punctuation_marks})" + "\n")

output.close()

# 3. File manipulator

import os
import re

commands = input()
while commands != "End":
    commands = commands.split("-")
    command = commands[0]
    file_name = commands[1]
    print(file_name)
    if command == "Create":
        file = open(file_name, "w")
        file.close()
    elif command == "Add":
        file = open(file_name, "a")
        file.write("\n" + commands[2])
        file.close()
    else:
        if file_name not in os.listdir():
            print("An error occurred")
        else:
            if command == "Delete":
                os.remove(file_name)
            else:
                with open(file_name) as file:
                    lines = [l.rstrip("\n") for l in file]
                    for i in range(len(lines)):
                        lines[i] = re.sub(commands[2], commands[3], lines[i])
                file = open(file_name, "w")
                file.write("\n".join(lines))
                file.close()
    commands = input()

4.  Directory traversal

import os
from pathlib import Path
from sortedcontainers import SortedSet

p = Path("C:\\Users\\.............\\")
files = SortedSet(x.name for x in p.iterdir() if x.is_file())
extentions = SortedSet(os.path.splitext(x)[1] for x in p.iterdir() if x.is_file())

output = open("report.txt", "w")
for extention in extentions:
    print(extention)
    for file in files:
        if extention in file:
            print(f"- - - {file}")
